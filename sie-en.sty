%%
%% Cover Page Generation
%%

\newcommand{\advisor}[1]{\gdef\@advisor{#1}}
\newcommand{\majorfield}[1]{\gdef\@majorfield{#1}}
\newcommand{\programfield}[1]{\gdef\@programfield{#1}}
\newcommand{\graduateyear}[1]{\gdef\@graduateyear{#1}}
\newcommand{\graduatemonth}[1]{\gdef\@graduatemonth{#1}}

\def\maketitle{\par
  \begingroup
  \def\@makefnmark{
    \hbox to \z@{$\m@th^{\@thefnmark}$\hss}}%
  \if@twocolumn
  \twocolumn[\@maketitle]
  \else
  \global\@topnum\z@
  \@maketitle \fi\thispagestyle{plain}\@thanks
  \endgroup
  \let\maketitle\relax
  \let\@maketitle\relax
  \let\abstract\relax 
  \let\majorfield\relax\gdef\@majorfield{}
  \let\programfield\relax\gdef\@programfield{}
  \gdef\@thanks{}\gdef\@author{}\gdef\@title{}\let\thanks\relax
}

\def\@maketitle{
  \thispagestyle{empty}
  \begin{center}
        \vbox to 6.0cm { % Title box
            \vspace*{\fill}
            {\LARGE \baselineskip 1.5em \@title\\}
            \vspace*{\fill} 
        }
        \vbox to 7.5cm { 
            \vspace*{\fill}
        }
          {\fontsize{17}{17}\selectfont
            Graduate School of Science and Technology \\
            Degree Programs in Systems and Information Engineering \\
            University of Tsukuba\\
          } \vspace{1.5cm}
          {\Large \@graduatemonth
            \hspace{0.5em} \@graduateyear}

            \vspace*{\fill} 
            {\LARGE \@author}            \\
    \end{center}
    \newpage
}

%%
%% Abstract Generation
%%

\renewcommand{\abstract}[1]{\gdef\sieabstract{#1}}

\newcommand{\makeabstract}{
  \thispagestyle{empty}
  \vspace*{20pt plus 1fil}
  \begin{center}
    {\bf \large Abstract}\vspace{5mm}
  \end{center}
  {
    \setlength{\parskip}{0pt}  
    \sieabstract
  }
  \vspace{50pt plus 1fil}
  \newpage
}

%%
%% Table of Contents Generation
%%

\newcommand{\maketableofcontents}{
  \pagenumbering{roman} % I, II, III, IV

  {
    \setlength{\parskip}{0pt}
    \tableofcontents
    \listoffigures
    \listoftables
  }
  \pagebreak
  \setcounter{page}{1}
  \pagenumbering{arabic} % 1,2,3
}


%%
%% Title Formatting for Chapter, Section
%%

%\RequirePackage[left=2.5cm,right=2.5cm,top=3.0cm,bottom=3.0cm]{geometry}

%% REF: https://github.com/szcf-weiya/zju-thesis/blob/master/proposal/zju-proposal.cls

\RequirePackage{titlesec}   
\titleformat{\chapter}[display]{\fontsize{20pt}{25pt}\sffamily\raggedright}{\chaptertitlename\ \thechapter}{40pt}{}
\titlespacing{\chapter}{0pt}{0pt}{30pt}
\titleformat{\section}[hang]{\fontsize{18pt}{22pt}\sffamily\raggedright}{\thesection}{30pt}{}
\titlespacing{\section}{0pt}{10pt}{5pt}
\titleformat{\subsection}[hang]{\fontsize{16pt}{20pt}\sffamily\raggedright}{\thesubsection}{30pt}{}
\titlespacing{\subsection}{0pt}{10pt}{5pt}
\titleformat{\subsubsection}[hang]{\fontsize{14pt}{18pt}\sffamily\raggedright}{\thesubsubsection}{30pt}{}
\titlespacing{\subsubsection}{0pt}{10pt}{5pt}

%\titlecontents{ <section> }[ <left> ]{ <above-code> }
%              { <numbered-entry-format>  #5 }{ <numberless-entry-format> #6 }
%              { <filler-page-format> }[ <below-code> ]

\RequirePackage{titletoc}
\titlecontents{chapter}[70pt]{}
    {\fontsize{13pt}{20pt}\bfseries
     \hspace*{-70pt}\makebox[70pt][l]{\chaptertitlename\ \thecontentslabel}}
    {\fontsize{13pt}{20pt}\bfseries\hspace*{-70pt}}
    {\titlerule*[0.3pc]{.}\thecontentspage\hspace*{-2pc}}{\addvspace{3pt}}{}
\titlecontents{section}[40pt]{}
    {\hspace*{-30pt}\makebox[30pt][l]{\thecontentslabel}}{}
    {\titlerule*[0.3pc]{.}\thecontentspage\hspace*{-2pc}}{\addvspace{3pt}}{}
\titlecontents{subsection}[60pt]{}
    {\hspace*{-40pt}\makebox[40pt][l]{\thecontentslabel}}{}
    {\titlerule*[0.3pc]{.}\thecontentspage\hspace*{-2pc}}{\addvspace{3pt}}{}
\titlecontents{subsubsection}[60pt]{}{}{}
    {\titlerule*[0.3pc]{.}\thecontentspage\hspace*{-2pc}}{\addvspace{3pt}}{}
\titlecontents{figure}[63pt]{}
    {\hspace*{-63pt}\makebox[63pt][l]{\figurename\ \thecontentslabel}}{}
    {\titlerule*[0.3pc]{.}\thecontentspage\hspace*{-2pc}}{\addvspace{3pt}}{}
\titlecontents{table}[53pt]{}
    {\hspace*{-53pt}\makebox[53pt][l]{\tablename\ \thecontentslabel}}{}
    {\titlerule*[0.3pc]{.}\thecontentspage\hspace*{-2pc}}{\addvspace{3pt}}{}
    

\setlength{\parskip}{1em}
